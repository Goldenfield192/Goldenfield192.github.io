你可以通过给某些部件添加一些特殊的READOUT来告诉IR这个部件是可操纵的。

本节我们讨论由玩家操作进行输入的部分。关于仪表，参见[下一节](LocosGauges.md)。
玩家可通过鼠标左键或滚轮来操纵部件。

## 移动、缩放与旋转

IR通过识别以下READOUT来加载动画：

|       READOUT        |  用途  |
|:--------------------:|:----:|
|  `TL_[num]_[axis]`   | 标记位移 |
| `SCALE_[num]_[axis]` | 标记缩放 |
|     `ROT_[deg]`      | 标记旋转 |


>[!ATTENTION]
> 同一对象中的不同物体包含的动画READOUT会被加载后共同作用于对象整体，即属于同一对象的两个不同对象都拥有`ROT`是非法的。
### 移动


IR通过识别`TL_[num]_[axis]`来标记移动。对于一个部件，其每个轴向上都允许有一个或零个`TL`。


这个READOUT用于标记部件动画变量为1时，其在Minecraft的`[axis]`轴上位移了`[num]`米，部件动画变量为0时表示其在原位置，中间值线性映射到各个位置。


`[axis]`为Minecraft轴向下的X、Y或Z。
blender坐标系为右手坐标系：拇指为X轴，食指为Y轴，中指为Z轴（中指向上），而Minecraft的右手坐标系为中指水平。两个坐标系的X轴方向一致。


`[num]`表示位移量，正值代表向对应轴正方向移动，负值则相反。


关于TL的轴向：

![awa](../Textures/image.webp)

(来自[@FS_FADE](https://space.bilibili.com/26992615))


### 缩放

IR通过识别`SCALE_[num]_[axis]`来标记缩放。对于一个部件，其每个轴向上都允许有一个或零个`SCALE`。

这个READOUT用于标记部件默认状态下在Minecraft的`[axis]`轴上被缩放到`1-[num]+[num]*[动画变量]`倍，对应轴向缩放中心点为标记对应READOUT的物体的中心。

举个例子，若一个部件拥有`SCALE_1_X`，则代表这个部件在动画变量为0时在X轴上缩放为0，在动画变量为1时缩放到原状。

### 旋转

每个部件中最多可以有一个包含`ROT_[deg]`的对象，这个对象即为整个部件的旋转轴心。

我建议你把它整成一个一边长度明显大于另两边的长方体，这样显然更利于人类识别。

IR会自动根据该部件的长边指向计算旋转轴方向，这个轴不一定是坐标轴。

整个部件会绕着旋转轴对象旋转`[deg]`度，正值逆时针转，负值相反。旋转方向遵循右手定则，即以旋转轴中心建立空间直角坐标系（轴向同Blender）时，右手握住旋转轴，大拇指指向正号较多的一侧（如对于Ⅱ卦限(-X+Y+Z)——Ⅷ卦限(+X-Y-Z)的转轴，大拇指指向Ⅱ卦限），则四指方向为旋转正方向。


（数据来自[@跃进铁道工作组](https://space.bilibili.com/3493296842213650)）
>[!NOTE]
>操纵组件时即为改变其动画变量，动画变量再反过来控制组件的渲染。

## 用来控制车辆的，或者说可交互控制台

你可以通过一些READOUT来让动画部件变为控件，进而控制车辆的对应变量。

|            READOUT             |              用途              |
|:------------------------------:|:----------------------------:|
|      `BELL_CONTROL_[num]`      |         为1时触发警铃音效事件          |
|    `WHISTLE_CONTROL_[num]`     |         为1时触发车哨音效事件          |
|      `HORN_CONTROL_[num]`      |         为1时触发喇叭音效事件          |
|        `THROTTLE_[num]`        |         控制车辆节流阀（仅机车）         |
|        `REVERSER_[num]`        |         控制车辆回转机（仅机车）         |
|      `TRAIN_BRAKE_[num]`       | 控制~~机车~~全列车制动（@ZhangSan2333） |
|   `INDEPENDENT_BRAKE_[num]`    |       控制车辆独立制动（如果有的话）        |
|     `THROTTLE_BRAKE_[num]`     |       控制车辆风压制动器（如果有的话）       |
| `CYLINDER_DRAIN_CONTROL_[num]` |             WIP              |
| `COUPLER_ENGAGED_[pos]_[num]`  |           切换对应车钩模式           |
|      `ENGINE_START_[num]`      |            启动内燃机车            |

>[!TIP]
> 强烈建议`ENGINE_START_[num]`与`TOGGLE`连用以达到开关效果。

此处`[num]`仅作动画组件的区分之用，即`THROTTLE_1`和`THROTTLE_2`均属于[控制组](Main/Markdowns/Groups.md)`THROTTLE`。

这些部件的变量值与对应控制部分共享，即操纵`THROTTLE_1`或直接通过键盘控制时，车辆节流阀会改变，`THROTTLE_2`的状态也会一同改变。

## 门
你可以给对象添加`DOOR_[num]`来标记这是一扇门。

什么都不加时这就是个摆设，但你可以给`DOOR_[num]`添加修饰符来让它成为功能性门：

|     修饰符      |               用途               |
|:------------:|:------------------------------:|
|  `EXTERNAL`  | 对外车门，在对应动画变量大于0.75时允许玩家通过该门上下车 |
| `CONNECTING` | 连接门，在对应动画变量小于0.75时单向阻止玩家进入相邻车厢 |

这两个不共存。

>[!NOTE]
> 1. 如果想使用对外的车门，则须确保玩家的碰撞箱能接触到门的外框（在blender里视图显示为边界范围时你看到的），否则无法使用。
> 2. 连接门通过所处位置自动计算是前车门还是后车门。

## 座位

你可以给部件添加`SEAT_[num]`来标记这是一个座位。

在上车后左键单击会使玩家坐在座位上，**Shift会使玩家下座，再次Shift才是下车。**
>[!NOTE]
>玩家会以坐姿显示在模型最低点的高度，这意味着`SEAT_[num]`最好是一个平面。

## 纯装饰控件
对于没有实际作用而仅仅是装饰用控件的部件，你可以给部件添加`WIDGET_[num]`来标记。

要不然IR不读动画的，没有READOUT的部分默认为`SHELL`，`SHELL`没有动画一说。

IR还有`WINDOW_[num]`这个READOUT，不过就和`WIDGET_[num]`一样，只是动画的载体而无实际功能。

>[!TIP]
> 对于控件、门、窗、[头灯](Lights.md)，你都可以在字符串与数字之间添加`BOGEY_FRONT`或`BOGEY_REAR`来使其跟随前/后转向架运动，如`WIDGET_BOGEY_FRONT_1`会跟随前转向架运动。
> 若车辆为机车，还可以为`FRONT_LOCOMOTIVE`或`REAR_LOCOMOTIVE`来使其跟随前/后车架运动。
>   不同部件间共享动画变量方式待测试
